<div class="field">
  <app-search-field ></app-search-field>
</div>


@if(data){
  <div class="information">
    <div class="image-holder">
      <img src="{{ url }}" alt="">
    </div>
    <div class="wrap">
      <h2>{{ data.name }}</h2>
      <div class="mark-and-review">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="star" viewBox="0 0 16 16">
            <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
          </svg>
          {{ data.rating }}/5
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="cloud" viewBox="0 0 16 16">
            <path d="M8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6-.097 1.016-.417 2.13-.771 2.966-.079.186.074.394.273.362 2.256-.37 3.597-.938 4.18-1.234A9 9 0 0 0 8 15"/>
          </svg>
          {{ data.countComments }}
          отзывов
        </div>
      </div>
      <div>
        <p>Артикул {{ data.article }}</p>
      </div>

      <div class="description">
        <div class="title">
          <h2>Описание</h2>
        </div>
        <div class="description-body">   {{ data.description }} </div>

      </div>

    </div>

    <div class="wrap">
      <p class="price">{{ data.price }} ₽</p>
      <div class="buttons">
        <button class="cart-button">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="cart" viewBox="0 0 16 16">
            <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
          </svg>
          В корзину
        </button>
        <button class="heard-button">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="heart" viewBox="0 0 16 16">
            <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <div class="dopInfo">
    <div class="miniPhotos">
      @if(urlAvatar){
        <img src="{{ urlAvatar }}" alt="" class="mini-avatar mini-photo" (click)="changePhoto(urlAvatar)">
      }
      @if(photosUrl){
        @for(urlMiniPhoto of photosUrl; track urlMiniPhoto.id){
          <app-mini-photo class="mini-photo" (click)="changePhoto(urlMiniPhoto.url)"
          [url]="urlMiniPhoto.url"
          ></app-mini-photo>
        }
      }
    </div>
    <div class="comments-block">

      @if(auth.user){
      <div class="newComment">
        <div class="name">{{ auth.user.username }}</div>
        <div class="new-com-field">
          <textarea placeholder="Комментарий" maxlength="1000" [(ngModel)]="comment" autoResize></textarea>
        </div>
        <div class="but">
          <button class="send-comm-but" (click)="sendComment()">ОТПРАВИТЬ</button>
        </div>

      </div>
      }
      @if(displayedComments){
        <div class="comments">
          @for(com of displayedComments; track com.id){
            <app-comment
              [comment]="com"
            ></app-comment>
          }
        </div>
      }
      @if(maxComm < this.comments.length){
      <div class="showMore" (click)="showMore()">
        Далее
      </div>
      }

    </div>
  </div>

}
